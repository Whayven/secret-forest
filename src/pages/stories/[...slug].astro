---
import { Story as StoryCmp } from "../../components/Story";
import { getStoryBySlug, getStories } from "../../api/Story";
import Layout from "@/layouts/Layout.astro";

export async function getStaticPaths() {
  const stories = await getStories();
  return stories.map((story) => ({
    params: { slug: story.slug },
    // revalidate: 60, // In seconds
  }));
}

const { slug } = Astro.params;
const story = await getStoryBySlug(slug);
if (!story) {
  throw new Error(`Story not found: ${slug}`);
}
---

<Layout>
  <StoryCmp story={story} />
</Layout>
